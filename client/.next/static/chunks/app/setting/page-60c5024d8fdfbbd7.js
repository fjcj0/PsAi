(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[409],{1847:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var a=r(2115);let s=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:u,...h}=e;return(0,a.createElement)("svg",{ref:t,...i,width:s,height:s,stroke:r,strokeWidth:c?24*Number(n)/Number(s):n,className:l("lucide",o),...!d&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:c,...o}=r;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...o})});return r.displayName=s(e),r}},4348:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var a=r(5959),s=r(5125),l=r(9538);s.A.defaults.withCredentials=!0;let i="".concat(l.env.SERVER_URL,"/api/auth"),n=(0,a.v)(e=>({isAuth:null,isLoading:!1,user:null,error:void 0,fetchUser:async()=>{e({isLoading:!0});try{var t;let r=await s.A.get("".concat(i,"/success"),{withCredentials:!0});(null==(t=r.data)?void 0:t.user)?e({user:r.data.user,isAuth:!0}):e({user:null,isAuth:!1})}catch(t){console.log(t.message),e({user:null,isAuth:!1,error:t.message})}finally{e({isLoading:!1})}},logout:async()=>{try{await s.A.get("".concat(i,"/logout"),{withCredentials:!0}),e({user:null,isAuth:!1})}catch(e){console.log(e.message)}},editUser:async t=>{let{userId:r,newDisplayName:a,newProfilePicture:l}=t;e({isLoading:!0,error:void 0});try{let t=new FormData;t.append("userId",r),a&&t.append("newDisplayName",a),l&&t.append("newProfilePicture",l);let n=await s.A.post("".concat(i,"/edit-user"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});e({user:n.data.user,isLoading:!1})}catch(r){var n,c;let t=(null==(c=r.response)||null==(n=c.data)?void 0:n.message)||r.message;throw e({error:t,isLoading:!1}),console.log(t),Error(t)}}}))},5999:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var a=r(5155),s=r(5239),l=r(2115),i=r(7260),n=r(1847);let c=(0,n.A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),o=(0,n.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),d=e=>{let{type:t,placeholder:r,isActive:s,text:l,setText:i}=e;return(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsx)("input",{type:t,placeholder:r,value:l,onChange:e=>i(e.target.value),disabled:!s,className:"w-full p-3 rounded-md outline-none ".concat(s?"bg-black/10 text-white/50 focus:outline focus:outline-white/25":"bg-white/20 text-white placeholder-white/50 border-[0.5px] border-white")})})};var u=r(2663),h=r(7187);let f=()=>{let e=(0,i.useRouter)(),{user:t,isAuth:r,logout:n,loading:f}=(0,h.A)(),{editUser:p}=(0,h.A)(),[m,g]=(0,l.useState)(""),[x,w]=(0,l.useState)(""),[y,v]=(0,l.useState)(""),[b,A]=(0,l.useState)(null),j=(0,l.useRef)(null);if((0,l.useEffect)(()=>{f||!1!==r||e.push("/")},[r,f,e]),(0,l.useEffect)(()=>{t&&(g(t.displayName||""),w(t.email||""),v(t.image||""))},[t]),f)return(0,a.jsx)("div",{className:"w-screen h-screen flex items-center justify-center text-white",children:"Loading..."});if(!r)return null;let N=async e=>{var r;let a=null==(r=e.target.files)?void 0:r[0];if(a&&t){A(a);let e=u.Ay.loading("Updating profile...");try{await p({userId:t._id,newDisplayName:null,newProfilePicture:a}),u.Ay.success("Profile updated successfully!",{id:e});let r=new FileReader;r.onloadend=()=>{v(r.result)},r.readAsDataURL(a)}catch(t){console.error(t),u.Ay.error("Failed to update profile.",{id:e})}}},k=async()=>{if(!t)return;let e=u.Ay.loading("Updating display name...");try{await p({userId:t._id,newDisplayName:m,newProfilePicture:null}),u.Ay.success("Display name updated successfully!",{id:e})}catch(t){u.Ay.error("Failed to edit display name!",{id:e})}};return(0,a.jsx)("div",{className:"w-screen h-screen bg-black flex items-center justify-center",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 bg-slate-400/10 p-5 rounded-xl gap-10 w-[90%]",children:[(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("h1",{className:"text-4xl font-bold text-white text-center",children:["Edit Your"," ",(0,a.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-500/80 to-white",children:"PsAi"})," ","Here",(0,a.jsx)("br",{}),(0,a.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-blue-500/80 to-white",children:(null==t?void 0:t.displayName)||""})]})}),(0,a.jsxs)("div",{className:"w-full flex flex-col items-start justify-start gap-y-4",children:[(0,a.jsx)("div",{className:"w-full flex flex-col items-center justify-center gap-4",children:(0,a.jsxs)("div",{className:"relative",children:[y?(0,a.jsx)(s.default,{src:y,alt:(null==t?void 0:t.displayName)||"User Image",width:80,height:80,className:"rounded-full"}):(0,a.jsx)("div",{className:"w-32 h-32 bg-gray-500 rounded-full"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;null==(e=j.current)||e.click()},className:"absolute top-[2.5rem] left-1/2 transform w-[5rem] flex items-center justify-center -translate-x-1/2 bg-white/10 rounded-b-full p-2 hover:bg-gray-300 transition duration-300",children:(0,a.jsx)(c,{className:"w-5 h-6 text-black"})}),(0,a.jsx)("input",{type:"file",ref:j,className:"hidden",accept:"image/*",onChange:N})]})}),(0,a.jsxs)("div",{className:"w-full grid grid-cols-1 gap-3",children:[(0,a.jsx)(d,{type:"text",isActive:!0,placeholder:"Enter new display name...",text:m,setText:g}),(0,a.jsx)(d,{type:"email",isActive:!1,placeholder:"Email.....",text:x,setText:w})]}),(0,a.jsx)("div",{className:"w-full flex items-center justify-center",children:(0,a.jsxs)("button",{onClick:k,type:"button",className:"flex flex-row gap-2 items-center justify-center bg-black/10 text-white/50 hover:text-white hover:bg-black/50 duration-300 px-7 py-3 font-bold rounded-lg",children:[(0,a.jsx)(o,{size:20}),"Edit"]})})]})]})})}},7187:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>n});var a=r(5155),s=r(2115),l=r(4348);let i=(0,s.createContext)(void 0),n=e=>{let{children:t}=e,{fetchUser:r,user:n,isAuth:c,logout:o,editUser:d}=(0,l.n)(),[u,h]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{(async()=>{await r(),h(!1)})()},[r]),(0,a.jsx)(i.Provider,{value:{user:n,isAuth:c,loading:u,logout:o,editUser:d},children:t})},c=()=>{let e=(0,s.useContext)(i);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},8839:(e,t,r)=>{Promise.resolve().then(r.bind(r,5999))}},e=>{e.O(0,[755,239,663,441,255,358],()=>e(e.s=8839)),_N_E=e.O()}]);
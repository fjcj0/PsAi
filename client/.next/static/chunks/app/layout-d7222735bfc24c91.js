(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1290:()=>{},2215:(e,t,r)=>{Promise.resolve().then(r.bind(r,7187)),Promise.resolve().then(r.t.bind(r,1290,23)),Promise.resolve().then(r.bind(r,2663))},4348:(e,t,r)=>{"use strict";r.d(t,{n:()=>o});var s=r(5959),a=r(5125),i=r(9538);a.A.defaults.withCredentials=!0;let n="".concat(i.env.SERVER_URL,"/api/auth"),o=(0,s.v)(e=>({isAuth:null,isLoading:!1,user:null,error:void 0,fetchUser:async()=>{e({isLoading:!0});try{var t;let r=await a.A.get("".concat(n,"/success"),{withCredentials:!0});(null==(t=r.data)?void 0:t.user)?e({user:r.data.user,isAuth:!0}):e({user:null,isAuth:!1})}catch(t){console.log(t.message),e({user:null,isAuth:!1,error:t.message})}finally{e({isLoading:!1})}},logout:async()=>{try{await a.A.get("".concat(n,"/logout"),{withCredentials:!0}),e({user:null,isAuth:!1})}catch(e){console.log(e.message)}},editUser:async t=>{let{userId:r,newDisplayName:s,newProfilePicture:i}=t;e({isLoading:!0,error:void 0});try{let t=new FormData;t.append("userId",r),s&&t.append("newDisplayName",s),i&&t.append("newProfilePicture",i);let o=await a.A.post("".concat(n,"/edit-user"),t,{headers:{"Content-Type":"multipart/form-data"},withCredentials:!0});e({user:o.data.user,isLoading:!1})}catch(r){var o,l;let t=(null==(l=r.response)||null==(o=l.data)?void 0:o.message)||r.message;throw e({error:t,isLoading:!1}),console.log(t),Error(t)}}}))},7187:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>o});var s=r(5155),a=r(2115),i=r(4348);let n=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,{fetchUser:r,user:o,isAuth:l,logout:u,editUser:d}=(0,i.n)(),[c,h]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{await r(),h(!1)})()},[r]),(0,s.jsx)(n.Provider,{value:{user:o,isAuth:l,loading:c,logout:u,editUser:d},children:t})},l=()=>{let e=(0,a.useContext)(n);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[741,755,663,441,255,358],()=>e(e.s=2215)),_N_E=e.O()}]);